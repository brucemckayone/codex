{
  "editor.defaultFormatter": "biomejs.biome",
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.fixAll.biome": "explicit"
  },
  "[javascript]": {
    "editor.defaultFormatter": "biomejs.biome"
  },
  "[typescript]": {
    "editor.defaultFormatter": "biomejs.biome"
  },
  "[json]": {
    "editor.defaultFormatter": "biomejs.biome"
  },
  "[svelte]": {
    "editor.defaultFormatter": "biomejs.biome"
  },

  // Vitest Extension Configuration
  "vitest.enable": true,
  "vitest.commandLine": "pnpm vitest",

  // Use workspace config for monorepo (recommended approach)
  "vitest.workspaceConfig": "./vitest.workspace.ts",

  // Search for config files in the monorepo (exclude e2e - those are Playwright tests)
  "vitest.configSearchPatternInclude": "**/*{vite,vitest}*.config*.{ts,js,mjs,cjs,cts,mts}",
  "vitest.configSearchPatternExclude": "{**/node_modules/**,**/.*/**,*.d.ts,**/e2e/**}",

  // Exclude e2e folder from Vitest (uses Playwright, not Vitest)
  "vitest.exclude": ["**/node_modules/**", "**/e2e/**"],

  // Use static AST collection for better performance (experimental but recommended)
  "vitest.experimentalStaticAstCollect": true,

  // Environment variables for tests (includes database connection for integration tests)
  "vitest.nodeEnv": {
    "PG_CONNECTION_STRING": "postgresql://postgres:postgres@db.localtest.me:5432/main"
  },

  // Testing view behavior - keep results panel open only on failures
  "testing.automaticallyOpenTestResults": "openOnTestFailure",

  // Show diagnostics (squiggly lines) for test failures
  "vitest.applyDiagnostic": true,

  // Log level for debugging extension issues
  "vitest.logLevel": "info",

  // Maximum configs to load (good for monorepos)
  "vitest.maximumConfigs": 10,

  // File watcher pattern
  "vitest.filesWatcherInclude": "**/*",

  // Debugging configuration
  "vitest.debugExclude": ["<node_internals>/**", "**/node_modules/**"],
  "vitest.debugOutFiles": [
    "${workspaceFolder}/**/*.(m|c|)js",
    "!**/node_modules/**"
  ],

  // Svelte language server - use system node for pnpm compatibility
  "svelte.language-server.runtime": "/usr/local/bin/node",

  "editor.fontFamily": "Operator Mono, Menlo, Monaco, 'Courier New', monospace",
  "workbench.colorTheme": "Default Dark Modern",
  "editor.fontSize": 17,
  "editor.lineHeight": 25,
  "editor.letterSpacing": 0.5,
  "files.trimTrailingWhitespace": true,
  "editor.fontWeight": "400",
  "editor.cursorStyle": "line",
  "editor.cursorWidth": 5,
  "editor.cursorBlinking": "solid",
  "editor.renderWhitespace": "all"
}
